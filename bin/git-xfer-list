#!/usr/bin/env sh
#
# push functionality of git-xfer plugin
# 
# @author <bprinty@gmail.com>
# ------------------------------------------------


# meta
# ----
usage() {
    echo "usage: git xfer list [options]"
    echo ""
    echo "Options:"
    echo "  -h | --help              Show help and exit."
    echo "  -v | --verbose           Show verbose output for cache."
    echo "  -f | --files             Show only files."
}


# exec
# ----
main() {

    if [ -e "$cache" ]; then
	cachedata=`cat "$cache"`
    else
	cachedata=""
    fi
    case $1 in
        "-h"|"--help")
            usage; exit 0
            ;;
        "-f"|"--files")
            echo "$cachedata" | sed 's/.*\.\//.\//g' | sed 's/  local.*//g'; exit 0
            ;;
    esac
    echo "$cachedata"
}

base=`git rev-parse --show-toplevel`
cache="$base/.git/xfer/cache"
main "$@"
