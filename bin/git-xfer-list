#!/usr/bin/env sh
#
# push functionality of git-xfer plugin
# 
# @author <bprinty@gmail.com>
# ------------------------------------------------


# meta
# ----
usage() {
    echo "usage: git xfer list [options]"
}


# exec
# ----
main() {

    if [ -e "$cache" ]; then
	cachedata=`cat "$cache"`
    else
	cachedata=""
    fi
    case $1 in
        "-h"|"--help")
            usage; exit 0
            ;;
        "-v"|"--verbose")
            echo "$cachedata"; exit 0
            ;;
        "-f"|"--files")
            echo "$cachedata" | awk '{ print $2 }'; exit 0
            ;;
    esac
    echo "$cachedata" | awk '{ print $2"\t\t"$3 }'
}

base=`git rev-parse --show-toplevel`
cache="$base/.git/xfer/cache"
main "$@"
